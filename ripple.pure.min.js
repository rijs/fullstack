var rijs=function(){"use strict";function n(n,e){return e={exports:{}},n(e,e.exports),e.exports}function e(n){var e=Y();return r(e),D(e),W(e),G(e),t(e),x(e),b(e),c(e),S(e,n),u(e),e}var t=n(function(n){n.exports=function(n){return f?(b("creating"),n.draw=Node.prototype.draw=function(n){return function(e){return this&&this.nodeName?o(n)(this):this&&this.node?o(n)(this.node()):e?e instanceof _?o(n)(e.target):e[0]instanceof _?o(n)(e[0].target):e.nodeName?o(n)(e):e.node?o(n)(e.node()):e.name?r(n)(e.name):y.str(e)?r(n)(e):x("could not update",e):t(n)}}(n),n.render=i(n),n.on("change.draw",n.draw),w(e(n)),n):n};var e=function(n){return function(){return h("*").filter(v("nodeName",d("-"))).map(n.draw)}},t=function(n){var e=p(n.resources).map(function(e){return(n.types[e.headers["content-type"]].selector||m)(e)}).join(",");return h(e||null).map(o(n))},r=function(n){return function(e){var t=n.resources[e],r=t.headers["content-type"];return h((n.types[r].selector||m)(t)).map(o(n))}},o=function(n){return function(e){if(d("-")(e.nodeName)){if("#document-fragment"==e.nodeName)return o(n)(e.host);if("#text"==e.nodeName)return o(n)(e.parentNode);if(e.matches(O)&&null==l(e,"inert"))return function(n){return function(e){e.pending||(e.pending=[],requestAnimationFrame(function(){e.changes=e.pending,delete e.pending,n.render(e)})),n.change&&e.pending.push(n.change[1])}}(n)(e),e}}},i=function(n){return function(e){var t=e.shadowRoot||e,r=l(e,"data"),o=c(n)(r),i=a(n)(g(e.tagName)),s=i&&i.prototype&&i.prototype.render;if(!i)return e;if(r&&!o)return e;if(s&&t.class!=i)return Object.getOwnPropertyNames((t.class=i).prototype).map(function(n){return t[n]=i.prototype[n].bind(t)}),Promise.resolve((t.init||m).call(t,t,t.state=t.state||{})).then(function(){return n.draw(t.initialised=t)}),e;if(!s||t.initialised){try{(t.render||i).call(t,t,u(e,o))}catch(n){x(n,n.stack)}return e}}},u=function(n,e){return n.state=n.state||{},s(n.state)(e),s(n.state)(n.__data__),n.__data__=n.state,n.state},c=function(n){return function(e){var t={},r=e?e.split(" "):[];return r.map(function(e){return t[e]=a(n)(e)}),r.length?p(t).some(y.falsy)?void 0:t:void 0}},a=function(n){return function(e){return n.resources[e]&&n.resources[e].body}},s=window.overwrite,d=window.includes,f=!0,p=window.values,w=window.ready,l=window.attr,m=window.noop,h=(window.time,window.key,window.all),y=window.is,v=window.by,g=window.lo,b=window.log("[ri/components]"),x=window.err("[ri/components]"),_=f&&window.MutationRecord||m,O=f&&!!window.document.registerElement?"html *, :host-context(html) *":"html *";f&&(window.Element.prototype.matches=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector)}),r=function(n){return i("creating"),o.ripple||(o.ripple=n),n},o=window,i=window.log("[ri/singleton]"),u=n(function(n){n.exports=function(n){if(o)return t("creating"),n.render=e(n)(n.render),n};var e=function(n){return function(e){return function(t){var o=d(c(t,"is")).split(" ").map(a(n.resources)).filter(i("content-type","application/javascript")),l=d(c("css")(t)).split(" ");o.filter(p("headers.needs",r("[css]"))).map(f("name")).map(u(".css")).filter(s(w.in(l))).map(function(n){return c("css",(d(c("css")(t))+" "+n).trim())(t)});var m=e(t);return m&&m.state?(o.map(f("body")).map(function(n){return n.call(m.shadowRoot||m,m.shadowRoot||m,m.state)}),m):void 0}}},t=window.log("[ri/features]"),r=window.includes,o=!0,i=window.header,u=window.append,c=window.attr,a=window.from,s=window.not,d=window.str,f=window.key,p=window.by,w=window.is}),c=function(n){if(p&&window.localStorage)return g("creating"),a(n),n.on("change.cache",d(1e3)(s(n))),n},a=function(n){return h("loading cache",function(){return(m(localStorage.ripple)||[]).map(n)})},s=function(n){return function(){g("cached");var e=w(l(n.resources)).filter(y(f("cache","no-store")));e.filter(f("content-type","application/javascript")).map(function(e){return e.body=v(n.resources[e.name].body)}),localStorage.ripple=v(e)}},d=window.debounce,f=window.header,p=!0,w=window.values,l=window.clone,m=window.parse,h=window.group,y=window.not,v=window.str,g=window.log("[ri/offline]"),b=(window.err("[ri/offline]"),n(function(n){n.exports=function(n){if(o)return r("creating"),n.render=e(n)(n.render),n};var e=function(n){return function(e){return function(r){var o=c(i(r,"css")).split(" ").filter(Boolean),p=r.shadowRoot||r,w=document.head,l=w.createShadowRoot&&r.shadowRoot;if(!o.length)return e(r);if(!o.some(a(d.in(n.resources))))return o.map(function(e){return{res:n.resources[e],el:u('style[resource="'+e+'"]',l?p:w)||f("style[resource="+e+"]")}}).filter(function(n){return n.el.hash!=n.res.headers.hash}).map(function(n){return n.el.hash=n.res.headers.hash,n.el.innerHTML=l?n.res.body:t(n.res.body,n.res.name),n.el}).filter(a(s("parentNode"))).map(function(n){return l?p.insertBefore(n,p.firstChild):w.appendChild(n)}),e(r)}}},t=function(n,e){return function(n,e){return n.replace(/^(?!.*:host)([^@%\n]*){/gim,function(n){return e+" "+n}).replace(/^(?!.*:host)(.*?),\s*$/gim,function(n){return e+" "+n}).replace(/:host\((.*?)\)/gi,function(n,t){return e+t}).replace(/:host([ ,])/gi,function(n,t){return e+t}).replace(/^.*:host-context\((.*)\)/gim,function(n,t){return t+" "+e})}(n,'[css~="'+e+'"]')},r=window.log("[ri/precss]"),o=!0,i=window.attr,u=window.raw,c=window.str,a=window.not,s=window.by,d=window.is,f=window.el})),x=n(function(n){n.exports=function(n){if(u)return r("creating"),n.render=e(n)(n.render),n};var e=function(n){return function(e){return function(r){var i=s(r.nodeName);if(i in n.resources){var u=n.resources[i].headers;return(u.attrs=u.attrs||t(u.needs,i)).map(function(n){var e=n[0];return n[1].some(function(n){var t=a(r,e)||"";return!o(n)(t)&&a(r,e,(t+" "+n).trim())})}).some(Boolean)?r.draw():e(r)}}}},t=function(n,e){return void 0===n&&(n=""),n.split("[").slice(1).map(i("]","")).map(c("=")).map(function(n){var t=n[0],r=n[1];return r?[t,r.split(" ")]:"css"==t?[t,[e+".css"]]:[t,[]]})},r=window.log("[ri/needs]"),o=(window.err("[ri/needs]"),window.includes),i=window.replace,u=!0,c=window.split,a=window.attr,s=(window.key,window.lo)}),_=function(n){void 0===n&&(n=location.href.replace("http","ws"));var e=O({attempt:0});return e.ready=e.once("connected"),e.connect=j(e,n),e.connect(),e.send=function(n){return e.ready.then(function(e){return e.send(n)})},e},O=window.emitterify,N=Math.min,R=Math.pow,j=function(n,e){return function(){var t=window.WebSocket,r=(window.location,window.setTimeout),o=new t(e);o.onopen=function(){return n.emit("connected",o)},o.onmessage=function(e){return n.emit("recv",e.data)},o.onclose=function(){n.ready=n.once("connected"),n.emit("disconnected"),r(n.connect,k(++n.attempt))}}},k=function(n,e,t){return void 0===e&&(e=100),void 0===t&&(t=1e4),N(t,e*R(2,n))},z=n(function(n){!function(){function e(n){return"object"==typeof n?null===n?"null":n&&1===n.nodeType?"dom":n instanceof Array?"array":n instanceof Date?"date":"object":typeof n}function t(n){var e=arguments,t=arguments.length;if(t<2||null==n)return n;for(var r=1;r<t;r++)for(var o=e[r],i=Object.keys(o),u=i.length,c=0;c<u;c++){var a=i[c];void 0===n[a]&&(n[a]=o[a])}return n}function r(n,t,o,u){o.prepare&&o.prepare(n),u=u||[];var s=e(n);if(-1!==c.indexOf(s)){var d=u.indexOf(n);if(-1===d){var f={};u[d=t.push({contents:f,value:function(n){var t=e(n);if("function"===t||"date"===t)return i(n);if("object"===t)return w;if("array"===t)return l;return n}(n)})-1]=n;for(var p in n)o.isSerializable(n,p)&&(f[p]=r(n[p],t,o,u))}return a+d}return i(n)}function o(n,t,r,i){if(i=i||[],u(n,a)){var c=parseInt(n.slice(a.length),10);if(!i.hasOwnProperty(c)){var m=t[c],h=function(n){if("string"===e(n)){if(n===f)return;if(u(n,d))return new Function("return "+n.slice(d.length))();if(u(n,p)){var t=parseInt(n.slice(p.length),10);return new Date(t)}if(u(n,w))return{};if(u(n,l))return[];if(n===s)return 1/0}return n}(m.value),y=m.contents;i[c]=h;for(var v in y)h[v]=o(y[v],t,r,i)}return r.finalize&&r.finalize(i[c]),i[c]}return r.finalize&&r.finalize(n),function(n){if("string"===e(n)){if(n===f)return;if(u(n,d)){var t=n.slice(d.length),r=t.indexOf("(")+1,o=t.indexOf(")",r),i=t.slice(r,o),c=t.indexOf("{")+1,a=t.lastIndexOf("}")-1,w=t.slice(c,a);return new Function(i,w)}if(u(n,p)){var l=parseInt(n.slice(p.length),10);return new Date(l)}if(n===s)return 1/0}return n}(n)}function i(n){var t=e(n);if("undefined"===t)return f;if("function"===t)return d+n.toString();if("date"===t)return p+n.getTime();if(n===1/0)return s;if("dom"!==t)return n}function u(n,t){return"string"===e(n)&&n.slice(0,t.length)===t}var c="object array date function".split(" "),a="_CRYO_REF_",s="_CRYO_INFINITY_",d="_CRYO_FUNCTION_",f="_CRYO_UNDEFINED_",p="_CRYO_DATE_",w="_CRYO_OBJECT_",l="_CRYO_ARRAY_",m={stringify:function(n,e){var o=[],i=r(n,o,e=t((e="function"==typeof e?{prepare:e}:e)||{},{prepare:null,isSerializable:function(n,e){return n.hasOwnProperty(e)}}));return JSON.stringify({root:i,references:o})},parse:function(n,e){var r=JSON.parse(n);return e="function"==typeof e?{finalize:e}:e,e=t(e||{},{finalize:null}),o(r.root,r.references,e)}},h=this;n.exports?n.exports=m:h.Cryo=m}()}),C=n(function(n){n.exports=function(n){void 0===n&&(n={});var r=n.socket;return void 0===r&&(r=_()),r.id=0,r.once("disconnected").map(function(){return r.on("connected").map(t(r))}),r.on("recv").map(function(n){return u(n)}).each(function(n){var e=n.id,t=n.data;return t.exec?t.exec(r.on["$"+e]&&r.on["$"+e][0],t.value):r.emit("$"+e,t)}),Object.defineProperty(c(r),"subscriptions",{get:function(){return e(r)}})};var e=function(n){return o(n.on).map(function(n){return n&&n[0]}).filter(function(n){return n&&n.type&&"$"==n.type[0]})},t=function(n){return function(){return e(n).map(function(n){return n.type}).map(function(e){return n.send(n.on[e][0].subscription)})}},r=window.emitterify,o=window.values,i=window.str,u=z.parse,c=function(n,e){return function(t,r){if(t instanceof window.Blob)return a(n,t,r);var o=i(++n.id),u=n.on("$"+o),s=function(t,r){return void 0===r&&(r=0),n.send(u.source.subscription=i({id:o,data:t,type:e})).then(function(){return u.emit("sent",{id:o,count:r})})};return t.next?t.map(s).source.emit("start"):s(t),u.source.once("stop").filter(function(n){return"CLOSED"!=n}).map(function(){return c(n,"UNSUBSCRIBE")(o).filter(function(n,e,t){return t.source.emit("stop","CLOSED")})}),u}},a=function(n,e,t,o,i){void 0===o&&(o=0),void 0===i&&(i=1024);var u=r().on("recv"),a=function(t){return function(){return o>=e.size?u.emit("sent",{id:t}):(n.send(e.slice(o,o+=i)),window.setTimeout(a(t)))}};return c(n,"BINARY")({size:e.size,meta:t}).on("sent",function(n){var e=n.id;return a(e)()}).on("progress",function(n){return u.emit("progress",{received:n,total:e.size})}).map(u.next).source.until(u.once("stop")),u}}),S=n(function(n){n.exports=function(n,r,u){void 0===r&&(r={}),void 0===u&&(u={});var s=u.xrs;return void 0===s&&(s=C),n.send=e(s()),n.subscribe=o(n),n.subscriptions={},n.get=t(n),n.upload=i(n),n.upload.id=0,n.render=c(n)(n.render),n.deps=a(n),n};var e=function(n){return function(e,t,r){return e instanceof Blob?n(e,t):n(s.obj(e)?e:{name:e,type:t,value:r})}},t=function(n){return function(e,t){if(n.subscriptions[e]=n.subscriptions[e]||{},s.arr(t))return Promise.all(t.map(function(t){return n.get(e,t)}));var r=w(t)(w("resources."+e+".body")(n));return t in n.subscriptions[e]&&r?Promise.resolve(r):n.subscribe(e,t).filter(function(n,e,t){return t.source.emit("stop")}).map(function(){return w(t)(w("resources."+e+".body")(n))})}},r=function(n){var e=v().on("next"),t=[];return n.map(function(n,r){return n.each(function(n){t[r]=n,e.next(t)})}),e.once("stop").map(function(){return n.map(function(n){return n.source.emit("stop")})}),e},o=function(n){return function(e,t){if(s.arr(e))return r(e.map(function(e){return n.subscribe(e,t)}));if(n.subscriptions[e]=n.subscriptions[e]||{},s.arr(t))return r(t.map(function(t){return n.subscribe(e,t)})).map(function(){return w(t)(n(e))});var o=v().on("next");o.on("stop").filter(function(){return i.off(o.next)&&!i.li.length}).map(function(){return i.source.emit("stop")}).map(function(){n.subscriptions[e][t]=void 0}),n.subscriptions[e][t]&&o.on("start").map(function(){return w(t)(n(e))}).filter(s.def).map(function(n){return o.next(n)});var i=n.subscriptions[e][t]=n.subscriptions[e][t]||n.send(e,"SUBSCRIBE",t).map(function(n,e){return function(t){return t.key||"update"!=t.type?f(t)(e in n.resources?n(e):n(e,{})):n(u(h({name:e})(t))),t}}(n,e)).map(function(){return w(t)(n(e))});return i.each(o.next),o}},i=function(n){return function(e,t){var r=++n.upload.id,o={},i=0,u=function(){if(!c.length)return!0;var e=c.shift(),t=e.field,o=e.filename,s=e.i,d=e.blob;return n.send(d,{filename:o,field:t,i:s,index:r}).on("progress",function(n){var e=n.received;n.total;return a.emit("progress",{total:i,received:i-(d.size-e)-c.reduce(function(n,e){return n+=e.blob.size},0)})}).then(u)},c=l(t).map(function(n){return o[n]=t[n],n}).filter(function(n){return t[n]instanceof FileList}).map(function(n){return o[n]=[],d.arr(t[n]).map(function(n){return i+=n.size,n}).map(function(e,t){return{field:n,filename:e.name,i:t,blob:e,sent:0}})}).reduce(m,[]),a=n.send({files:c.length,type:"PREUPLOAD",fields:o,index:r,size:i,name:e}).once("sent",u);return a}},u=function(n){var e=n.name,t=n.value;return{name:e,headers:n.headers,body:t}},c=function(n){return function(e){return function(t){return!n.deps(t).filter(p(s.in(n.subscriptions))).map(function(e){return n.subscribe(e)}).length&&e(t)}}},a=function(n){return function(e){return y(n.types).filter(function(n){return n.extract}).map(function(n){return n.extract(e)}).reduce(function(n,e){return n.concat(e)},[]).filter(Boolean)}},s=window.is,d=window.to,f=window.set,p=window.not,w=window.key,l=window.keys,m=window.flatten,h=window.extend,y=window.values,v=window.emitterify}),E={header:"text/plain",check:function(n){return!B(".html")(n.name)&&!B(".css")(n.name)&&I.str(n.body)}},B=window.includes,I=window.is,Y=n(function(n){n.exports=function(){function n(t,r,o){return t?p.arr(t)?t.map(n):p.promise(t)?t.then(n).catch(m):p.obj(t)&&!t.name?n(d(t)):p.fn(t)&&t.resources?n(d(t.resources)):p.str(t)&&!r&&n.resources[t]?n.resources[t].body:!p.str(t)||r||n.resources[t]?p.str(t)&&r?e(n)({name:t,body:r,headers:o}):p.obj(t)&&!p.arr(t)?e(n)(t):(m("could not find or create resource",t),!1):void 0:n}h("creating");return n.resources={},n.resource=u(n),n.register=n,n.types=i(),c(n)};var e=function(n){return function(r){var o=r.name,i=r.body,u=r.headers;if(void 0===u&&(u={}),h("registering",o),p.promise(i))return i.then(function(t){return e(n)({name:o,body:t,headers:u})}).catch(m);var c=t(n)({name:o,body:i,headers:u});return c?(n.resources[o]=c,n.emit("change",[o,{type:"update",value:c.body,time:y(c)}]),n.resources[o].body):(m("failed to register",o),!1)}},t=function(n){return function(e){return s("content-type")(e)||d(n.types).sort(l("priority")).some(o(e)),s("content-type")(e)?r(n)(e):(m("could not understand resource",e),!1)}},r=function(n){return function(e){var t=s("content-type")(e);return n.types[t]?(n.types[t].parse||a)(e):(m("could not understand type",t),!1)}},o=function(n){return function(e){return e.check(n)&&(n.headers["content-type"]=e.header)}},i=function(){return[E].reduce(w.obj("header"),1)},u=function(n){return function(){return n.apply(this,arguments),n}},c=window.emitterify,a=(window.colorfill,window.identity),s=window.header,d=window.values,f=window.key,p=window.is,w=window.to,l=window.za,m=window.err("[ri/core]"),h=window.log("[ri/core]"),y=function(n,e){return e=f("body.log.length")(n),p.num(e)?e-1:e}}),D=function(n){return q("creating"),n.on("change.data").filter(function(e){var t=e[0];e[1];return T("content-type","application/data")(n.resources[t])}).filter(function(n){n[0];var e=n[1];return e&&e.key}).map(function(e){var t=e[0],r=e[1];return n.resources[t].body.emit("change",r||null,U(J.in(["bubble"])))}),n.types["application/data"]={header:"application/data",selector:function(n){return'[data~="'+n.name+'"]'},extract:function(n){return(F("data")(n)||"").split(" ")},check:function(n){return!!J.obj(n.body)},parse:function(e){J.str(e.body)&&(e.body=M(e.body));var t=n.resources[e.name]||{};return A(e.headers)(t.headers),e.body=L()(e.body||[],t.body&&t.body.log,J.num(e.headers.log)?e.headers.log:-1),P(e.body.on)(H(t)),e.body.on("change.bubble",function(t){n.emit("change",n.change=[e.name,t],U(J.in(["data"]))),delete n.change}),e}},n},P=window.overwrite,T=window.header,A=window.extend,F=window.attr,U=window.not,$=window.key,L=window.set,M=window.fn,J=window.is,q=window.log("[ri/types/data]"),H=$("body.on"),W=n(function(n){n.exports=function(n){return r("creating"),n.types["text/css"]={header:"text/css",selector:function(n){return'[css~="'+n.name+'"]'},extract:function(n){return(t("css")(n)||"").split(" ")},check:function(n){return e(".css")(n.name)},parse:function(n){return n.headers.hash=o(n.body),n}},n};var e=window.includes,t=window.attr,r=window.log("[ri/types/css]"),o=function(n){for(var e=5381,t=n.length;t;)e=33*e^n.charCodeAt(--t);return e>>>0}}),G=function(n){return nn("creating"),n.types["application/javascript"]={selector:K,extract:Q,header:V,check:X,parse:Z},n},K=function(n){return n.name+',[is~="'+n.name+'"]'},Q=function(n){return(en("is")(n)||"").split(" ").concat(rn(n.nodeName))},V="application/javascript",X=function(n){return tn.fn(n.body)},Z=function(n){return n.body=on(n.body),n},nn=window.log("[ri/types/fn]"),en=window.attr,tn=(window.str,window.is),rn=window.lo,on=window.fn;!window.ripple&&e();return e}();
